# ç”¨æˆ·æ³¨å†ŒåŒæ­¥é—®é¢˜è¯Šæ–­æŠ¥å‘Šä¸è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜åˆ†æ

ç»è¿‡è¯¦ç»†åˆ†æï¼Œç”¨æˆ·æ³¨å†Œè´¦å·æ— æ³•åœ¨ç”¨æˆ·è´¦å·ç®¡ç†ä¸­åŒæ­¥æ˜¾ç¤ºçš„æ ¹æœ¬åŸå› æ˜¯ï¼š

### é—®é¢˜æ ¹æº
1. **ç”¨æˆ·ç®¡ç†åŠŸèƒ½éœ€è¦è®¤è¯**ï¼š`/api/users` ç«¯ç‚¹éœ€è¦æœ‰æ•ˆçš„è®¤è¯token
2. **ç¼ºå°‘ç®¡ç†å‘˜è´¦æˆ·**ï¼šç”Ÿäº§ç¯å¢ƒæ²¡æœ‰å¯ç”¨çš„ç®¡ç†å‘˜è´¦æˆ·è¿›è¡Œç™»å½•
3. **æ³¨å†ŒåŠŸèƒ½æ­£å¸¸**ï¼šç”¨æˆ·æ³¨å†ŒAPI (`/api/auth/register`) å·¥ä½œæ­£å¸¸
4. **æ•°æ®å­˜å‚¨æ­£å¸¸**ï¼šæ•°æ®åº“è¿æ¥å’Œå­˜å‚¨åŠŸèƒ½æ­£å¸¸

### éªŒè¯ç»“æœ
```bash
# æµ‹è¯•ç»“æœ
âœ… ç”¨æˆ·æ³¨å†ŒAPIï¼šæ­£å¸¸å·¥ä½œ (201 Created)
âŒ ç”¨æˆ·åˆ—è¡¨APIï¼šéœ€è¦è®¤è¯token (401 Unauthorized)
âŒ ç®¡ç†å‘˜ç™»å½•ï¼šæ²¡æœ‰å¯ç”¨çš„ç®¡ç†å‘˜è´¦æˆ·
âœ… ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼šæ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ
```

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šé€šè¿‡æ³¨å†Œåˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
```bash
# æ³¨å†Œç®¡ç†å‘˜è´¦æˆ·
curl -X POST "http://47.109.142.72/api/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "maintenance_admin",
    "password": "Maintain@2025",
    "name": "ç»´æŠ¤ç®¡ç†å‘˜",
    "role": "admin",
    "email": "admin@maintenance.com",
    "phone": "13800138000"
  }'
```

#### æ­¥éª¤2ï¼šç›´æ¥åœ¨æ•°æ®åº“ä¸­è®¾ç½®ç®¡ç†å‘˜æƒé™
```sql
-- å¦‚æœéœ€è¦ç›´æ¥åœ¨æ•°æ®åº“ä¸­ä¿®æ”¹ç”¨æˆ·è§’è‰²
UPDATE users SET role = 'admin' WHERE username = 'maintenance_admin';
```

### æ–¹æ¡ˆ2ï¼šä¿®å¤ç°æœ‰ç®¡ç†å‘˜è´¦æˆ·

#### æ£€æŸ¥ç°æœ‰ç”¨æˆ·å¹¶é‡ç½®å¯†ç 
```bash
# é€šè¿‡SSHç™»å½•æœåŠ¡å™¨
ssh root@47.109.142.72

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /root/learning-platform

# è¿è¡Œå¯†ç é‡ç½®è„šæœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
node update-password.js
```

### æ–¹æ¡ˆ3ï¼šä¸´æ—¶ç»•è¿‡è®¤è¯ï¼ˆä»…ç”¨äºæ’æŸ¥ï¼‰

åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ— è®¤è¯ç”¨æˆ·åˆ—è¡¨ç«¯ç‚¹è¿›è¡Œæµ‹è¯•ï¼š

```javascript
// åœ¨æœåŠ¡å™¨ä¸Šä¸´æ—¶æ·»åŠ 
app.get('/api/users/public', async (req, res) => {
  try {
    const [users] = await pool.execute(
      'SELECT id, username, name, role, created_at FROM users ORDER BY created_at DESC'
    );
    res.json({ success: true, data: users, count: users.length });
  } catch (error) {
    res.status(500).json({ error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' });
  }
});
```

## ğŸ“‹ å®Œæ•´ä¿®å¤æµç¨‹

### 1. ç«‹å³ä¿®å¤æ­¥éª¤
```bash
# 1. æ³¨å†Œç®¡ç†å‘˜è´¦æˆ·
curl -X POST "http://47.109.142.72/api/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "maintenance_admin",
    "password": "Maintain@2025",
    "name": "ç»´æŠ¤ç®¡ç†å‘˜",
    "role": "admin"
  }'

# 2. ä½¿ç”¨æ–°è´¦æˆ·ç™»å½•è·å–token
curl -X POST "http://47.109.142.72/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "maintenance_admin",
    "password": "Maintain@2025"
  }'

# 3. ä½¿ç”¨tokenæŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
curl -X GET "http://47.109.142.72/api/users" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

### 2. å‰ç«¯æ“ä½œæ­¥éª¤
1. ä½¿ç”¨æ–°çš„ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ç³»ç»Ÿ
2. è¿›å…¥ç”¨æˆ·è´¦å·ç®¡ç†é¡µé¢
3. ç°åœ¨åº”è¯¥èƒ½çœ‹åˆ°æ‰€æœ‰æ³¨å†Œçš„ç”¨æˆ·
4. å¯ä»¥æ­£å¸¸ä½¿ç”¨æ·»åŠ ç”¨æˆ·å’Œç¼–è¾‘ç”¨æˆ·åŠŸèƒ½

### 3. éªŒè¯ä¿®å¤
- [ ] èƒ½å¤ŸæˆåŠŸç™»å½•ç®¡ç†è´¦æˆ·
- [ ] ç”¨æˆ·ç®¡ç†é¡µé¢æ˜¾ç¤ºæ‰€æœ‰æ³¨å†Œç”¨æˆ·
- [ ] æ·»åŠ ç”¨æˆ·åŠŸèƒ½æ­£å¸¸ï¼ˆå¼¹çª—ä¸å†404ï¼‰
- [ ] ç¼–è¾‘ç”¨æˆ·åŠŸèƒ½æ­£å¸¸ï¼ˆå¼¹çª—ä¸å†404ï¼‰

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **ï¼šé¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
2. **åˆ›å»ºå¤‡ç”¨ç®¡ç†å‘˜**ï¼šåˆ›å»ºè‡³å°‘2ä¸ªç®¡ç†å‘˜è´¦æˆ·é¿å…è¢«é”å®š
3. **å®šæœŸå®¡æ ¸ç”¨æˆ·**ï¼šå®šæœŸæ£€æŸ¥å’Œæ¸…ç†ä¸éœ€è¦çš„ç”¨æˆ·è´¦æˆ·
4. **æƒé™æ§åˆ¶**ï¼šç¡®ä¿åªæœ‰ç®¡ç†å‘˜èƒ½è®¿é—®ç”¨æˆ·ç®¡ç†åŠŸèƒ½

## ğŸ·ï¸ é•¿æœŸæ”¹è¿›å»ºè®®

1. **åˆå§‹åŒ–è„šæœ¬**ï¼šåˆ›å»ºç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬è‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜
2. **å¯†ç é‡ç½®æœºåˆ¶**ï¼šæ·»åŠ ç®¡ç†å‘˜å¯†ç é‡ç½®åŠŸèƒ½
3. **ç”¨æˆ·å¯¼å…¥åŠŸèƒ½**ï¼šæ”¯æŒæ‰¹é‡å¯¼å…¥ç”¨æˆ·æ•°æ®
4. **æƒé™ç»†åŒ–**ï¼šå®ç°æ›´ç²¾ç»†çš„æƒé™æ§åˆ¶ç³»ç»Ÿ

---

**é—®é¢˜çŠ¶æ€**: å·²è¯†åˆ«æ ¹æœ¬åŸå› ï¼Œæä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆ
**ä¿®å¤éš¾åº¦**: ç®€å•ï¼ˆ5åˆ†é’Ÿå†…å¯å®Œæˆï¼‰
**é£é™©ç­‰çº§**: ä½é£é™©
