# 📷 照片识别功能使用指南

## 功能概述

学习平台的照片识别功能包含以下核心特性：

1. **📸 定时拍照监控** - 在学习过程中定时拍照记录
2. **👤 人脸识别验证** - 确保学习者是注册用户
3. **⏱️ 学习时间追踪** - 记录阅读时间和学习状态
4. **📊 学习记录统计** - 生成详细的学习报告

## 🚀 快速开始

### 1. 启用照片识别功能

1. 进入管理员面板
2. 点击"设置"选项卡
3. 找到"人脸识别"选项并启用
4. 设置拍照间隔（建议30秒）

### 2. 用户注册人脸

1. 用户首次学习时，系统会要求拍照
2. 确保光线充足，人脸清晰可见
3. 拍照后系统会自动保存为参考人脸

### 3. 开始学习监控

1. 用户开始阅读文章时，摄像头会自动启动
2. 系统会定时拍照并与人脸识别
3. 如果检测到不同人员，学习时间会暂停

## 🔧 功能配置

### 摄像头设置

- **拍照间隔**: 建议30-60秒，可根据需要调整
- **照片质量**: 系统自动优化，平衡质量和文件大小
- **摄像头权限**: 首次使用需要允许浏览器访问摄像头

### 人脸识别设置

- **相似度阈值**: 默认0.6，可根据需要调整
- **模型加载**: 使用CDN加载，支持多个备用源
- **错误处理**: 自动重试和降级处理

## 🧪 测试功能

### 使用测试页面

1. 访问 `/camera-test` 页面
2. 测试摄像头功能
3. 测试人脸识别功能
4. 查看详细日志

### 测试步骤

1. **摄像头测试**
   - 点击"启动摄像头"
   - 检查视频预览
   - 点击"拍照测试"

2. **人脸识别测试**
   - 拍照后点击"设置参考人脸"
   - 再次拍照后点击"测试人脸识别"
   - 查看识别结果

3. **功能验证**
   - 检查测试日志
   - 验证识别准确性
   - 调整相似度阈值

## 📊 监控指标

### 学习监控数据

- **阅读时长**: 实际学习时间
- **拍照次数**: 监控照片数量
- **人脸验证**: 身份验证结果
- **学习状态**: 完成/失败状态

### 照片存储

- **本地存储**: 使用localStorage存储照片数据
- **云存储**: 支持OSS云存储（可选）
- **数据导出**: 支持导出学习报告

## ⚠️ 注意事项

### 隐私保护

1. **数据安全**: 照片数据仅用于学习监控
2. **本地存储**: 数据存储在用户本地设备
3. **权限控制**: 需要用户明确授权摄像头访问

### 技术要求

1. **浏览器支持**: 需要支持getUserMedia API
2. **摄像头设备**: 需要前置摄像头
3. **网络连接**: 人脸识别模型需要网络加载

### 故障排除

#### 摄像头无法启动

1. 检查浏览器权限设置
2. 确保没有其他应用占用摄像头
3. 尝试刷新页面重新授权

#### 人脸识别失败

1. 确保光线充足
2. 检查人脸是否清晰可见
3. 尝试重新设置参考人脸

#### 照片质量差

1. 调整摄像头位置
2. 改善光线条件
3. 检查摄像头设置

## 🔄 更新日志

### v1.0.0
- 基础照片识别功能
- 人脸识别验证
- 学习时间追踪

### v1.1.0
- 改进错误处理
- 优化照片质量
- 增加测试页面

### v1.2.0
- 多CDN模型加载
- 详细调试日志
- 用户友好界面

## 📞 技术支持

如果遇到问题，请：

1. 查看浏览器控制台错误信息
2. 使用测试页面验证功能
3. 检查网络连接和权限设置
4. 联系技术支持团队

## 🎯 最佳实践

### 管理员设置

1. **合理设置拍照间隔**: 避免过于频繁影响性能
2. **定期清理数据**: 清理过期的照片数据
3. **监控系统状态**: 定期检查功能运行状态

### 用户使用

1. **良好光线**: 确保学习环境光线充足
2. **稳定位置**: 保持相对固定的学习位置
3. **及时反馈**: 遇到问题及时报告

---

*最后更新: 2024年1月* 