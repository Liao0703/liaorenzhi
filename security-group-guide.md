# 阿里云安全组配置指南

## 🔧 问题诊断

应用已经在云服务器上成功启动，但外部无法访问。这通常是因为阿里云安全组没有开放端口 3000。

## ✅ 解决方案

### 方法一：通过阿里云控制台配置

1. **登录阿里云控制台**
   - 访问 https://ecs.console.aliyun.com/
   - 使用你的阿里云账号登录

2. **找到你的 ECS 实例**
   - 在左侧菜单选择"实例"
   - 找到 IP 为 `116.62.65.246` 的实例

3. **配置安全组**
   - 点击实例名称进入详情页
   - 在"安全组"标签页中点击安全组 ID
   - 点击"入方向"标签页

4. **添加入方向规则**
   ```
   协议类型: 自定义 TCP
   端口范围: 3000/3000
   授权对象: 0.0.0.0/0
   优先级: 1
   描述: 学习平台应用端口
   ```

### 方法二：通过阿里云 CLI 配置

如果你安装了阿里云 CLI，可以运行：

```bash
# 安装阿里云 CLI
pip install aliyun-cli

# 配置认证
aliyun configure

# 添加安全组规则
aliyun ecs AuthorizeSecurityGroup \
  --RegionId cn-hangzhou \
  --SecurityGroupId <你的安全组ID> \
  --IpProtocol tcp \
  --PortRange 3000/3000 \
  --SourceCidrIp 0.0.0.0/0
```

### 方法三：临时测试

如果你想快速测试，可以临时开放所有端口（仅用于测试）：

```bash
# 在阿里云控制台中添加入方向规则
协议类型: 全部
端口范围: -1/-1
授权对象: 0.0.0.0/0
```

## 🔍 验证配置

配置完成后，运行以下命令验证：

```bash
# 检查端口是否开放
nc -z 116.62.65.246 3000

# 测试健康检查
curl http://116.62.65.246:3000/health

# 测试主页面
curl http://116.62.65.246:3000/
```

## 📊 应用状态

应用已经在云服务器上正常运行：

- ✅ 应用已启动
- ✅ 端口 3000 已监听
- ✅ 本地访问正常
- ❌ 外部访问被安全组阻止

## 🎯 预期结果

配置安全组后，你应该能够：

- ✅ 访问 http://116.62.65.246:3000
- ✅ 健康检查 http://116.62.65.246:3000/health
- ✅ API 状态 http://116.62.65.246:3000/api/status

## 💡 安全建议

- 生产环境建议只开放必要的端口
- 考虑使用负载均衡器
- 定期检查安全组规则
- 使用 HTTPS 加密传输 