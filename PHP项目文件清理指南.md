# PHPé¡¹ç›®æ–‡ä»¶æ¸…ç†æŒ‡å— - 47.109.142.72

## ğŸ—‚ï¸ é¡¹ç›®æ–‡ä»¶åˆ†ç±»

### âœ… **éœ€è¦ä¿ç•™çš„æ ¸å¿ƒæ–‡ä»¶**

#### PHPåç«¯æ–‡ä»¶ï¼ˆå®Œæ•´ä¿ç•™ï¼‰
```
php-backend/                     # å®Œæ•´PHPåç«¯ç›®å½•
â”œâ”€â”€ public/                      # Webæ ¹ç›®å½•
â”‚   â”œâ”€â”€ index.php               # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ .htaccess               # Apacheé‡å†™è§„åˆ™
â”‚   â””â”€â”€ test-api.html           # APIæµ‹è¯•é¡µé¢
â”œâ”€â”€ src/                        # PHPåº”ç”¨æºç 
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ vendor/                     # Composerä¾èµ–ï¼ˆæœåŠ¡å™¨ç”Ÿæˆï¼‰
â”œâ”€â”€ composer.json               # ä¾èµ–é…ç½®
â”œâ”€â”€ composer.lock               # ç‰ˆæœ¬é”å®š
â”œâ”€â”€ .env.example                # ç¯å¢ƒé…ç½®ç¤ºä¾‹
â””â”€â”€ deploy-to-baota.sh          # åŸPHPéƒ¨ç½²è„šæœ¬
```

#### æ–°å¢é…ç½®æ–‡ä»¶ï¼ˆåˆšåˆ›å»ºï¼‰
```
å®å¡”PHPé¡¹ç›®éƒ¨ç½²æŒ‡å—.md          # è¯¦ç»†éƒ¨ç½²æŒ‡å—
nginx-php-baota.conf            # PHPä¸“ç”¨Nginxé…ç½®
deploy-baota-php.sh             # ä¸€é”®éƒ¨ç½²è„šæœ¬
PHPé¡¹ç›®æ–‡ä»¶æ¸…ç†æŒ‡å—.md          # æœ¬æ–‡ä»¶
```

#### æ•°æ®åº“æ–‡ä»¶
```
server/init.sql                 # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```

#### å‰ç«¯æºç ï¼ˆæœ¬åœ°æ„å»ºç”¨ï¼‰
```
src/                            # Reactæºç ï¼ˆå·²æ›´æ–°APIé…ç½®ï¼‰
public/                         # é™æ€èµ„æº
package.json                    # å‰ç«¯ä¾èµ–é…ç½®
vite.config.ts                  # å·²æ›´æ–°ä¸ºPHPåç«¯é…ç½®
tsconfig.*.json                 # TypeScripté…ç½®
```

### âŒ **å¯ä»¥åˆ é™¤çš„æ–‡ä»¶**

#### Node.jsåç«¯ç›¸å…³ï¼ˆä¸éœ€è¦ï¼‰
```
server/                         # æ•´ä¸ªNode.jsåç«¯ç›®å½•
â”œâ”€â”€ app.js                     
â”œâ”€â”€ routes/
â”œâ”€â”€ config/
â”œâ”€â”€ package.json               # Node.jsåç«¯ä¾èµ–
â”œâ”€â”€ node_modules/              # Node.jsä¾èµ–
â””â”€â”€ ...

ecosystem.config.js             # PM2é…ç½®
server-baota.js                # Node.jsç‰ˆæœ¬çš„æœåŠ¡å™¨æ–‡ä»¶
server.cjs                     # Node.jsæœåŠ¡å™¨æ–‡ä»¶
```

#### Node.jsç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶
```
nginx-baota.conf               # Node.jsç‰ˆNginxé…ç½®
å®å¡”å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md            # Node.jsç‰ˆéƒ¨ç½²æŒ‡å—
```

#### å¼€å‘å’Œæµ‹è¯•æ–‡ä»¶
```
node_modules/                  # å‰ç«¯Nodeä¾èµ–ï¼ˆæœåŠ¡å™¨ä¸éœ€è¦ï¼‰
dist/                          # æ„å»ºäº§ç‰©ï¼ˆä¼šé‡æ–°ç”Ÿæˆï¼‰
uploads/                       # æµ‹è¯•ä¸Šä¼ æ–‡ä»¶
.git/                          # Gitå†å²ï¼ˆå¯é€‰åˆ é™¤ï¼‰
```

#### æ–‡æ¡£å’Œä¸´æ—¶æ–‡ä»¶
```
*.mdæ–‡æ¡£ï¼ˆé™¤æ–°å»ºçš„éƒ¨ç½²æŒ‡å—å¤–ï¼‰
README.md
å„ç§éƒ¨ç½²æŒ‡å—ï¼ˆé™¤PHPç‰ˆæœ¬å¤–ï¼‰
test-*.html                    # æµ‹è¯•æ–‡ä»¶
debug-*.html                   # è°ƒè¯•æ–‡ä»¶
```

#### éƒ¨ç½²è„šæœ¬ï¼ˆæ—§ç‰ˆæœ¬ï¼‰
```
deploy*.shï¼ˆé™¤deploy-baota-php.shå¤–ï¼‰
start*.sh
sync*.sh
fix*.sh
```

---

## ğŸ§¹ æ¸…ç†æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½é‡è¦æ–‡ä»¶
```bash
# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p backup-$(date +%Y%m%d)

# å¤‡ä»½é‡è¦é…ç½®
cp -r php-backend backup-$(date +%Y%m%d)/
cp server/init.sql backup-$(date +%Y%m%d)/
cp -r src backup-$(date +%Y%m%d)/
cp package.json vite.config.ts backup-$(date +%Y%m%d)/
```

### ç¬¬äºŒæ­¥ï¼šåˆ é™¤Node.jsåç«¯
```bash
# åˆ é™¤æ•´ä¸ªNode.jsåç«¯ç›®å½•
rm -rf server/

# åˆ é™¤Node.jsç›¸å…³é…ç½®
rm -f ecosystem.config.js
rm -f server-baota.js
rm -f server.cjs
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ é™¤æ—§é…ç½®æ–‡ä»¶
```bash
# åˆ é™¤Node.jsç‰ˆæœ¬é…ç½®
rm -f nginx-baota.conf
rm -f å®å¡”å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md

# åˆ é™¤æµ‹è¯•å’Œå¼€å‘æ–‡ä»¶
rm -rf uploads/
rm -rf node_modules/
rm -rf dist/
```

### ç¬¬å››æ­¥ï¼šåˆ é™¤æ–‡æ¡£æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```bash
# ä¿ç•™æ–°åˆ›å»ºçš„PHPéƒ¨ç½²ç›¸å…³æ–‡æ¡£ï¼Œåˆ é™¤å…¶ä»–
find . -name "*.md" -not -name "*PHP*" -not -name "PHP*" -delete

# æˆ–è€…é€‰æ‹©æ€§åˆ é™¤
rm -f README.md
rm -f DEPLOYMENT*.md
rm -f *GUIDE*.md
```

### ç¬¬äº”æ­¥ï¼šåˆ é™¤æ—§éƒ¨ç½²è„šæœ¬
```bash
# åˆ é™¤æ—§çš„éƒ¨ç½²è„šæœ¬ï¼ˆä¿ç•™æ–°çš„deploy-baota-php.shï¼‰
find . -name "deploy*.sh" -not -name "deploy-baota-php.sh" -delete
find . -name "start*.sh" -delete
find . -name "sync*.sh" -delete
find . -name "fix*.sh" -delete
```

---

## ğŸ“¦ æ¸…ç†åçš„ç›®å½•ç»“æ„

```
learning-platform/
â”œâ”€â”€ php-backend/                # PHPåç«¯ï¼ˆå®Œæ•´ï¼‰
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ composer.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/                        # Reactå‰ç«¯æºç 
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ package.json                # å‰ç«¯æ„å»ºä¾èµ–
â”œâ”€â”€ vite.config.ts             # æ„å»ºé…ç½®ï¼ˆå·²æ›´æ–°ï¼‰
â”œâ”€â”€ deploy-baota-php.sh        # PHPéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ nginx-php-baota.conf       # PHPç‰ˆNginxé…ç½®
â”œâ”€â”€ å®å¡”PHPé¡¹ç›®éƒ¨ç½²æŒ‡å—.md      # éƒ¨ç½²æŒ‡å—
â””â”€â”€ PHPé¡¹ç›®æ–‡ä»¶æ¸…ç†æŒ‡å—.md      # æœ¬æ–‡ä»¶
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦æ•°æ®**: æ¸…ç†å‰åŠ¡å¿…å¤‡ä»½é‡è¦æ–‡ä»¶
2. **æµ‹è¯•ç¯å¢ƒ**: å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒæ‰§è¡Œæ¸…ç†
3. **åˆ†æ­¥æ‰§è¡Œ**: ä¸è¦ä¸€æ¬¡æ€§åˆ é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ†æ­¥éª¤éªŒè¯
4. **ä¿ç•™.env**: å¦‚æœå·²æœ‰é…ç½®å¥½çš„.envæ–‡ä»¶ï¼Œè®°å¾—å¤‡ä»½
5. **Gitç®¡ç†**: å¦‚æœä½¿ç”¨Gitï¼Œè€ƒè™‘ä¿ç•™.gitç›®å½•

---

## ğŸš€ æ¸…ç†åçš„éƒ¨ç½²æµç¨‹

1. **ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶åˆ°æœåŠ¡å™¨**:
   - `php-backend/` â†’ `/www/wwwroot/47.109.142.72/php-backend/`
   - `nginx-php-baota.conf` â†’ Nginxé…ç½®ç›®å½•

2. **æœ¬åœ°æ„å»ºå‰ç«¯**:
   ```bash
   npm install
   npm run build
   # ä¸Šä¼ ç”Ÿæˆçš„dist/ç›®å½•
   ```

3. **è¿è¡Œéƒ¨ç½²è„šæœ¬**:
   ```bash
   chmod +x deploy-baota-php.sh
   ./deploy-baota-php.sh
   ```

4. **é…ç½®æ•°æ®åº“**: æŒ‰éƒ¨ç½²æŒ‡å—å®Œæˆæ•°æ®åº“è®¾ç½®

---

## ğŸ“ æ¸…ç†åå¦‚é‡é—®é¢˜

1. **ç¼ºå°‘æ–‡ä»¶**: ä»å¤‡ä»½ç›®å½•æ¢å¤
2. **é…ç½®é”™è¯¯**: æ£€æŸ¥æ–°çš„é…ç½®æ–‡ä»¶
3. **æƒé™é—®é¢˜**: ç¡®ä¿æ–‡ä»¶æƒé™æ­£ç¡®è®¾ç½®
4. **æœåŠ¡å¼‚å¸¸**: æŸ¥çœ‹PHPå’ŒNginxé”™è¯¯æ—¥å¿—

æ¸…ç†å®Œæˆåï¼Œé¡¹ç›®ç»“æ„ä¼šæ›´åŠ æ¸…æ™°ï¼Œåªä¿ç•™PHPé¡¹ç›®å¿…éœ€çš„æ–‡ä»¶ã€‚
