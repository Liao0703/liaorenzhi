# 维护模式功能使用指南

## 功能概述

维护模式是一个本地存储的维护状态管理功能，允许管理员在系统需要维护时启用维护模式，阻止用户访问系统功能，并显示维护信息。

## 主要特性

### 🔧 本地存储
- 所有维护状态都保存在浏览器的本地存储中
- 不依赖服务器连接，完全离线工作
- 数据持久化，刷新页面后状态保持不变

### 🛠️ 维护管理
- 管理员可以启用/禁用维护模式
- 支持设置维护原因和详细信息
- 记录维护历史，包括开始时间、结束时间、维护人员等

### 📊 状态监控
- 实时显示维护状态
- 维护时长计时器
- 维护历史记录查看

## 使用方法

### 1. 启用维护模式

1. 使用管理员账号登录系统
2. 进入管理后台
3. 点击"维护模式"标签页
4. 点击"启用维护模式"按钮
5. 填写维护原因和详细信息
6. 点击"确认启用"

### 2. 维护模式效果

启用维护模式后：
- 所有用户访问系统时会看到维护页面
- 维护页面显示维护信息、开始时间、维护时长等
- 用户无法访问系统的其他功能
- 维护页面有"退出维护模式"按钮（仅管理员可见）

### 3. 禁用维护模式

1. 在维护页面点击"退出维护模式"按钮
2. 或在管理后台的维护模式页面点击"禁用维护模式"按钮
3. 确认操作后，系统恢复正常运行

## 测试账号

### 管理员账号
- 用户名：`admin`
- 密码：`admin123`
- 权限：可以管理维护模式

### 维护人员账号
- 用户名：`maintenance`
- 密码：`admin123`
- 权限：可以管理维护模式

### 普通用户账号
- 用户名：`user1`、`user2`、`user3`
- 密码：`123456`
- 权限：只能查看维护页面

## 测试功能

访问 `/maintenance-test` 路径可以进入维护模式测试页面，用于：
- 测试维护模式的启用/禁用
- 查看维护状态
- 清除维护配置
- 验证功能是否正常工作

## 技术实现

### 核心文件
- `maintenanceService.ts` - 维护模式服务
- `MaintenancePage.tsx` - 维护页面组件
- `MaintenancePanel.tsx` - 维护管理面板
- `MaintenanceTest.tsx` - 测试页面

### 本地存储键
- `learning_maintenance_config` - 维护配置
- `learning_maintenance_history` - 维护历史

### 数据结构
```typescript
interface MaintenanceConfig {
  isEnabled: boolean;
  message: string;
  startTime: string;
  endTime?: string;
  reason: string;
  enabledBy: string;
}
```

## 注意事项

1. **数据安全**：维护配置存储在本地，清除浏览器数据会丢失维护状态
2. **权限控制**：只有管理员和维护人员可以管理维护模式
3. **状态同步**：维护状态仅在当前浏览器有效，不同浏览器间不共享
4. **历史记录**：系统会保留最近10条维护历史记录

## 故障排除

### 维护模式无法启用
- 检查是否使用管理员或维护人员账号
- 确认填写了维护原因和详细信息
- 查看浏览器控制台是否有错误信息

### 维护页面不显示
- 检查本地存储是否正常工作
- 确认维护模式确实已启用
- 刷新页面重新加载状态

### 维护历史丢失
- 检查浏览器存储空间是否充足
- 确认没有手动清除浏览器数据
- 查看是否有其他应用清除了本地存储

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的维护模式功能
- 本地存储实现
- 维护历史记录
- 管理员权限控制 