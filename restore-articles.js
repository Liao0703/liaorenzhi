// 恢复初始文章数据
import fetch from 'node-fetch';

const initialArticles = [
  {
    id: "1",
    title: '铁路安全操作规程',
    category: '安全规程',
    requiredReadingTime: 30,
    content: `
# 铁路安全操作规程

## 第一章 总则

第一条 为了加强铁路安全管理，规范操作行为，确保铁路运输安全，根据《中华人民共和国安全生产法》等法律法规，制定本规程。

第二条 本规程适用于铁路运输企业及其从业人员的安全操作活动。

## 第二章 基本要求

### 第一节 人员要求

第三条 铁路从业人员应当具备相应的安全知识和操作技能，经过安全培训并考核合格后方可上岗。

第四条 从业人员应当严格遵守安全操作规程，不得违章作业。

第五条 从业人员发现安全隐患或者发生事故时，应当立即报告，并采取有效措施防止事故扩大。

### 第二节 设备要求

第六条 铁路设备应当符合国家规定的安全技术标准，并定期进行检查、维护和保养。

第七条 设备出现故障时，应当立即停止使用，并及时进行维修。

第八条 新设备投入使用前，应当进行安全性能检测和验收。

## 第三章 操作规范

### 第一节 列车运行

第九条 列车运行前，应当对车辆、信号、线路等设备进行全面检查。

第十条 列车运行中，应当严格遵守信号指示和速度限制。

第十一条 遇到异常情况时，应当立即采取紧急制动措施。

### 第二节 信号操作

第十二条 信号操作人员应当严格按照信号操作规程进行操作。

第十三条 信号设备出现故障时，应当立即报告并采取应急措施。

第十四条 信号显示异常时，应当立即停止相关作业。

## 第四章 安全措施

### 第一节 防护措施

第十五条 作业人员应当穿戴符合要求的劳动防护用品。

第十六条 作业现场应当设置必要的安全警示标志。

第十七条 作业前应当进行安全技术交底。

### 第二节 应急处理

第十八条 发生事故时，应当立即启动应急预案。

第十九条 事故现场应当采取有效措施防止次生灾害。

第二十条 事故调查应当按照规定程序进行。

## 第五章 监督检查

### 第一节 检查制度

第二十一条 建立定期检查制度，确保安全措施落实到位。

第二十二条 检查人员应当具备相应的专业知识和技能。

第二十三条 检查结果应当及时记录并整改。

### 第二节 责任追究

第二十四条 违反本规程的行为，应当依法追究责任。

第二十五条 造成事故的，应当依法承担相应责任。

第二十六条 构成犯罪的，依法追究刑事责任。

## 第六章 附则

第二十七条 本规程由铁路安全管理部门负责解释。

第二十八条 本规程自发布之日起施行。

第二十九条 各铁路局可根据实际情况制定实施细则。

第三十条 本规程的修改和废止，按照有关规定执行。
`,
    questions: [
      {
        id: 1,
        question: '铁路从业人员上岗前需要什么条件？',
        options: [
          'A. 具备相应的安全知识和操作技能',
          'B. 经过安全培训并考核合格',
          'C. 以上都是',
          'D. 不需要任何条件'
        ],
        correctAnswer: 2
      },
      {
        id: 2,
        question: '列车运行前应当做什么检查？',
        options: [
          'A. 只检查车辆',
          'B. 只检查信号',
          'C. 对车辆、信号、线路等设备进行全面检查',
          'D. 不需要检查任何设备'
        ],
        correctAnswer: 2
      },
      {
        id: 3,
        question: '发生事故时应当采取什么措施？',
        options: [
          'A. 立即启动应急预案',
          'B. 等待上级指示',
          'C. 隐瞒不报',
          'D. 继续正常工作'
        ],
        correctAnswer: 0
      }
    ],
    fileType: 'none',
    fileName: null
  },
  {
    id: "2",
    title: '设备维护保养指南',
    category: '设备维护',
    requiredReadingTime: 45,
    content: `
# 设备维护保养指南

## 第一章 维护原则

### 1.1 预防性维护
设备维护应当以预防为主，定期检查和保养，确保设备处于良好状态。

### 1.2 标准化维护
维护工作应当按照标准程序进行，确保维护质量和安全。

### 1.3 记录管理
维护工作应当详细记录，建立设备维护档案。

## 第二章 维护内容

### 2.1 日常维护
- 设备清洁
- 紧固件检查
- 润滑保养
- 运行状态检查

### 2.2 定期维护
- 设备全面检查
- 零部件更换
- 性能测试
- 安全装置检查

### 2.3 专项维护
- 季节性维护
- 特殊工况维护
- 故障后维护

## 第三章 维护标准

### 3.1 检查标准
- 外观检查：无损坏、无变形、无锈蚀
- 功能检查：运行正常、响应灵敏
- 安全检查：防护装置完好、安全可靠

### 3.2 保养标准
- 清洁标准：表面清洁、无油污、无灰尘
- 润滑标准：润滑充分、无干摩擦
- 紧固标准：连接牢固、无松动

## 第四章 维护流程

### 4.1 维护前准备
1. 制定维护计划
2. 准备维护工具
3. 检查安全措施
4. 通知相关人员

### 4.2 维护实施
1. 设备停机
2. 安全隔离
3. 执行维护
4. 质量检查

### 4.3 维护后处理
1. 设备试运行
2. 记录维护情况
3. 清理现场
4. 恢复运行

## 第五章 安全要求

### 5.1 人员安全
- 穿戴防护用品
- 遵守安全规程
- 注意作业环境

### 5.2 设备安全
- 确保设备停机
- 切断电源
- 设置警示标志

### 5.3 环境安全
- 保持作业区域整洁
- 防止环境污染
- 及时清理废弃物

## 第六章 质量保证

### 6.1 维护质量
- 严格执行标准
- 确保维护效果
- 建立质量档案

### 6.2 持续改进
- 总结经验教训
- 优化维护流程
- 提高维护效率
`,
    questions: [
      {
        id: 1,
        question: '设备维护的基本要求是什么？',
        options: [
          'A. 定期检查和保养',
          'B. 只在故障时维修',
          'C. 不需要维护',
          'D. 随意处理'
        ],
        correctAnswer: 0
      },
      {
        id: 2,
        question: '维护工作应当如何记录？',
        options: [
          'A. 不需要记录',
          'B. 简单记录即可',
          'C. 详细记录，建立档案',
          'D. 只记录重要事项'
        ],
        correctAnswer: 2
      }
    ],
    fileType: 'none',
    fileName: null
  },
  {
    id: "3",
    title: '应急处理流程',
    category: '应急处理',
    requiredReadingTime: 25,
    content: `
# 应急处理流程

## 第一章 应急原则

### 1.1 安全第一
应急处理的首要原则是确保人员安全，其次保护设备，最后考虑经济损失。

### 1.2 快速响应
发生紧急情况时，应当立即启动应急预案，快速响应，控制事态发展。

### 1.3 统一指挥
应急处理应当统一指挥，协调行动，避免混乱。

## 第二章 应急组织

### 2.1 应急指挥部
- 总指挥：负责全面指挥
- 副总指挥：协助总指挥工作
- 各专业组：负责具体工作

### 2.2 应急小组
- 现场处置组：负责现场处置
- 技术支持组：提供技术支持
- 后勤保障组：提供后勤保障
- 信息联络组：负责信息联络

## 第三章 应急流程

### 3.1 发现阶段
1. 发现异常情况
2. 初步判断性质
3. 立即报告上级
4. 启动应急预案

### 3.2 响应阶段
1. 应急指挥部成立
2. 各小组到位
3. 现场处置开始
4. 信息收集分析

### 3.3 处置阶段
1. 制定处置方案
2. 实施处置措施
3. 控制事态发展
4. 消除安全隐患

### 3.4 恢复阶段
1. 评估损失情况
2. 制定恢复计划
3. 实施恢复措施
4. 恢复正常运行

## 第四章 应急措施

### 4.1 人员疏散
- 确定疏散路线
- 组织人员疏散
- 清点人员数量
- 安置疏散人员

### 4.2 现场隔离
- 设置警戒区域
- 控制人员进出
- 保护现场证据
- 防止次生灾害

### 4.3 设备保护
- 切断危险源
- 保护重要设备
- 防止设备损坏
- 减少经济损失

## 第五章 信息管理

### 5.1 信息收集
- 收集现场信息
- 记录处置过程
- 整理相关资料
- 建立信息档案

### 5.2 信息报告
- 及时向上级报告
- 向相关部门通报
- 向社会公众发布
- 保持信息透明

### 5.3 信息分析
- 分析事件原因
- 总结经验教训
- 完善应急预案
- 提高应急能力

## 第六章 培训演练

### 6.1 培训内容
- 应急知识培训
- 操作技能培训
- 安全防护培训
- 心理素质培训

### 6.2 演练要求
- 定期组织演练
- 模拟真实场景
- 检验应急能力
- 完善应急预案

### 6.3 效果评估
- 评估演练效果
- 发现问题不足
- 提出改进建议
- 持续改进提高
`,
    questions: [
      {
        id: 1,
        question: '应急处理的首要原则是什么？',
        options: [
          'A. 确保人员安全',
          'B. 保护设备',
          'C. 节省成本',
          'D. 快速处理'
        ],
        correctAnswer: 0
      },
      {
        id: 2,
        question: '应急处理应当如何指挥？',
        options: [
          'A. 各自为战',
          'B. 统一指挥',
          'C. 随机应变',
          'D. 等待指示'
        ],
        correctAnswer: 1
      }
    ],
    fileType: 'none',
    fileName: null
  }
];

async function restoreArticles() {
  console.log('🔄 开始恢复初始文章数据...\n');

  try {
    const response = await fetch('http://116.62.65.246:3000/api/articles', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ articles: initialArticles }),
    });

    const result = await response.json();
    if (result.success) {
      console.log('✅ 初始文章数据恢复成功');
      console.log(`   文章数量: ${result.count}`);
      
      // 验证恢复结果
      const verifyResponse = await fetch('http://116.62.65.246:3000/api/articles');
      const verifyResult = await verifyResponse.json();
      
      if (verifyResult.success) {
        console.log('\n📋 恢复的文章列表:');
        verifyResult.data.forEach(article => {
          console.log(`   - ${article.title} (${article.category})`);
        });
      }
    } else {
      console.log('❌ 恢复文章数据失败:', result.error);
    }

    console.log('\n🎉 文章数据恢复完成！');
    console.log('\n💡 现在用户可以正常看到所有文章了。');

  } catch (error) {
    console.error('❌ 恢复过程中出现错误:', error.message);
  }
}

// 运行恢复脚本
restoreArticles(); 