# 混合存储使用指南

## 概述

本系统现在支持**本地存储 + 阿里云OSS**的混合存储方案，为您提供最佳的文件存储体验。

## 存储策略

### 🏠 本地存储
- **优势**：访问速度快，无需网络
- **限制**：100MB存储空间
- **用途**：频繁访问的文件，小文件

### ☁️ 阿里云OSS
- **优势**：无限存储空间，云端访问
- **用途**：大文件，备份文件

### 🔄 混合存储
- **优势**：本地快速访问 + 云端备份
- **策略**：文件同时保存在本地和OSS

## 功能特性

### 1. 智能存储
- 文件自动保存到本地
- 后台异步上传到OSS
- 本地空间不足时自动清理旧文件

### 2. 访问优化
- 优先使用本地文件（最快）
- 本地文件不存在时回退到OSS
- 自动更新访问统计

### 3. 存储管理
- 实时存储统计
- 一键同步到OSS
- 智能缓存清理

## 使用流程

### 上传文件
1. 进入管理员面板
2. 点击"📄 上传文件"按钮
3. 选择PDF或Word文件
4. 文件自动保存到本地
5. 后台自动上传到OSS

### 查看文件
1. 在学习中心查看文章列表
2. 文件类型标识显示存储方式
3. 点击进入阅读页面
4. 文件自动内嵌预览

### 管理存储
1. 在管理员面板查看存储统计
2. 使用"同步到OSS"按钮同步文件
3. 使用"清理缓存"按钮清理旧文件

## 存储标识

### 文章列表中的标识
- 📄 **PDF** - PDF文件
- 📝 **WORD** - Word文件
- 🏠 **本地存储** - 仅本地存储
- ☁️ **OSS存储** - 仅OSS存储
- 🔄 **混合存储** - 本地+OSS存储

### 阅读页面中的标识
- 显示存储类型标签
- 显示文件大小和访问次数

## 存储统计

### 本地存储
- 文件数量
- 占用空间
- 访问统计

### OSS存储
- 同步文件数量
- 云端占用空间
- 同步状态

## 注意事项

### 1. 本地存储限制
- 最大100MB存储空间
- 超过限制时自动清理旧文件
- 只清理已同步到OSS的文件

### 2. 网络要求
- OSS上传需要网络连接
- 本地文件无需网络即可访问
- 网络中断时仍可访问本地文件

### 3. 数据安全
- 本地文件存储在浏览器中
- 清除浏览器数据会丢失本地文件
- OSS文件作为永久备份

### 4. 性能优化
- 小文件优先本地存储
- 大文件主要依赖OSS
- 自动缓存管理

## 故障排除

### 文件无法预览
1. 检查文件是否成功上传
2. 查看存储统计确认文件存在
3. 尝试重新同步到OSS

### 存储空间不足
1. 使用"清理缓存"功能
2. 删除不需要的文件
3. 检查OSS配置是否正确

### 同步失败
1. 检查网络连接
2. 验证OSS配置
3. 查看错误日志

## 最佳实践

1. **定期同步**：定期使用"同步到OSS"功能
2. **及时清理**：定期清理不需要的本地缓存
3. **监控存储**：关注存储统计，及时处理空间不足
4. **备份重要文件**：重要文件确保已同步到OSS

## 技术支持

如遇到问题，请检查：
- 浏览器控制台错误信息
- 网络连接状态
- OSS配置是否正确
- 存储空间是否充足 